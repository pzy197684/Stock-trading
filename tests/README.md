# Testsæµ‹è¯•ç›®å½•è¯´æ˜

## ğŸ“ ç›®å½•ç»“æ„

```
tests/                          # æµ‹è¯•æ–‡ä»¶ç›®å½•
â”œâ”€â”€ strategy/                   # ç­–ç•¥æµ‹è¯•ç›®å½•
â”‚   â””â”€â”€ test_martingale_hedge.py # é©¬ä¸å¯¹å†²ç­–ç•¥æµ‹è¯•
â”œâ”€â”€ test_accounts.py            # è´¦æˆ·åŠŸèƒ½æµ‹è¯•ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰
â””â”€â”€ test_recovery_strategy.py   # è§£å¥—ç­–ç•¥æµ‹è¯•ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰
```

## ğŸ“‹ æµ‹è¯•ç±»å‹è¯´æ˜

### ğŸ§ª å•å…ƒæµ‹è¯•
é’ˆå¯¹å•ä¸ªç»„ä»¶æˆ–åŠŸèƒ½çš„æµ‹è¯•
- ç­–ç•¥é€»è¾‘æµ‹è¯•
- å·¥å…·å‡½æ•°æµ‹è¯•
- æ•°æ®æ¨¡å‹æµ‹è¯•
- çŠ¶æ€ç®¡ç†æµ‹è¯•

### ğŸ”— é›†æˆæµ‹è¯•
ç»„ä»¶é—´äº¤äº’å’Œç³»ç»Ÿæ•´ä½“åŠŸèƒ½æµ‹è¯•
- ç­–ç•¥æ‰§è¡Œæµç¨‹æµ‹è¯•
- äº¤æ˜“æ‰€æ¥å£æµ‹è¯•
- è´¦æˆ·ç®¡ç†æµ‹è¯•
- é…ç½®åŠ è½½æµ‹è¯•

### ğŸ“Š ç­–ç•¥å›æµ‹
ä½¿ç”¨å†å²æ•°æ®éªŒè¯ç­–ç•¥æ•ˆæœ
- å†å²æ•°æ®å›æ”¾
- ç­–ç•¥æ€§èƒ½åˆ†æ
- é£æ§æœºåˆ¶éªŒè¯
- å‚æ•°ä¼˜åŒ–æµ‹è¯•

## ğŸ”§ æµ‹è¯•æ¡†æ¶

### ä½¿ç”¨çš„æµ‹è¯•åº“
- `unittest` - Pythonæ ‡å‡†æµ‹è¯•æ¡†æ¶
- `pytest` - é«˜çº§æµ‹è¯•æ¡†æ¶ï¼ˆæ¨èï¼‰
- `mock` - æ¨¡æ‹Ÿå¯¹è±¡åº“

### æµ‹è¯•å‘½åè§„èŒƒ
- æµ‹è¯•æ–‡ä»¶: `test_*.py`
- æµ‹è¯•ç±»: `Test*`
- æµ‹è¯•æ–¹æ³•: `test_*`

## ğŸ¯ ä¸»è¦æµ‹è¯•æ–‡ä»¶

### ğŸ“ˆ test_martingale_hedge.py
é©¬ä¸å¯¹å†²ç­–ç•¥æ ¸å¿ƒæµ‹è¯•
- çŠ¶æ€ç®¡ç†å™¨æµ‹è¯•
- è®¡ç®—é€»è¾‘æµ‹è¯•
- ç­–ç•¥ä¿¡å·æµ‹è¯•
- é£æ§æœºåˆ¶æµ‹è¯•

### ğŸ¦ test_accounts.py
è´¦æˆ·ç®¡ç†åŠŸèƒ½æµ‹è¯•
- è´¦æˆ·é…ç½®åŠ è½½
- APIå¯†é’¥éªŒè¯
- æƒé™æ£€æŸ¥
- å®‰å…¨æ€§æµ‹è¯•

### ğŸ”„ test_recovery_strategy.py
è§£å¥—ç­–ç•¥åŠŸèƒ½æµ‹è¯•
- è§£å¥—é€»è¾‘éªŒè¯
- çŠ¶æ€æŒä¹…åŒ–æµ‹è¯•
- é…ç½®å…¼å®¹æ€§æµ‹è¯•
- é”™è¯¯å¤„ç†æµ‹è¯•

## ğŸš€ è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
# ä½¿ç”¨pytest
pytest tests/

# ä½¿ç”¨unittest
python -m unittest discover tests/
```

### è¿è¡Œç‰¹å®šæµ‹è¯•
```bash
# è¿è¡Œç­–ç•¥æµ‹è¯•
pytest tests/strategy/

# è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
pytest tests/test_accounts.py

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–¹æ³•
pytest tests/test_accounts.py::TestAccountManager::test_load_config
```

### æµ‹è¯•è¦†ç›–ç‡
```bash
# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=core tests/

# ç”ŸæˆHTMLæŠ¥å‘Š
pytest --cov=core --cov-report=html tests/
```

## ğŸ“ ç¼–å†™æµ‹è¯•

### æµ‹è¯•æ¨¡æ¿
```python
import unittest
from unittest.mock import Mock, patch

class TestMyComponent(unittest.TestCase):
    
    def setUp(self):
        """æµ‹è¯•å‰å‡†å¤‡"""
        self.component = MyComponent()
    
    def tearDown(self):
        """æµ‹è¯•åæ¸…ç†"""
        pass
    
    def test_basic_functionality(self):
        """æµ‹è¯•åŸºæœ¬åŠŸèƒ½"""
        result = self.component.do_something()
        self.assertEqual(result, expected_value)
    
    @patch('external.dependency')
    def test_with_mock(self, mock_dependency):
        """ä½¿ç”¨æ¨¡æ‹Ÿå¯¹è±¡çš„æµ‹è¯•"""
        mock_dependency.return_value = 'mocked_result'
        result = self.component.use_dependency()
        self.assertEqual(result, 'expected_result')
```

## âš ï¸ æµ‹è¯•æœ€ä½³å®è·µ

1. **éš”ç¦»æ€§**: æ¯ä¸ªæµ‹è¯•ç‹¬ç«‹ï¼Œä¸ä¾èµ–å…¶ä»–æµ‹è¯•
2. **å¯é‡å¤**: å¤šæ¬¡è¿è¡Œç»“æœä¸€è‡´
3. **å¿«é€Ÿæ€§**: å•å…ƒæµ‹è¯•åº”è¯¥å¿«é€Ÿæ‰§è¡Œ
4. **æ¸…æ™°æ€§**: æµ‹è¯•åç§°å’Œæ–­è¨€æ¸…æ™°æ˜ç¡®
5. **è¦†ç›–æ€§**: é‡è¦é€»è¾‘åˆ†æ”¯éƒ½è¦è¦†ç›–

## ğŸ” è°ƒè¯•æµ‹è¯•

### è¯¦ç»†è¾“å‡º
```bash
pytest -v tests/
```

### åœåœ¨ç¬¬ä¸€ä¸ªå¤±è´¥
```bash
pytest -x tests/
```

### è°ƒè¯•æ¨¡å¼
```bash
pytest --pdb tests/
```

## ğŸ“Š æŒç»­é›†æˆ

æµ‹è¯•åº”è¯¥é›†æˆåˆ°CI/CDæµç¨‹ä¸­ï¼š
1. ä»£ç æäº¤æ—¶è‡ªåŠ¨è¿è¡Œæµ‹è¯•
2. æµ‹è¯•å¤±è´¥æ—¶é˜»æ­¢åˆå¹¶
3. å®šæœŸè¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
4. ç›‘æ§æµ‹è¯•è¦†ç›–ç‡å˜åŒ–