# Stock-Trading 项目目录结构

## 📁 项目根目录
```
Stock-trading/
├── 📄 README.md                    # 项目说明文档
├── 📄 start-trading.bat           # 完整版启动脚本
├── 📄 start-trading-2.bat         # 简化版启动脚本
├── 📄 启动原理.md                  # 启动原理说明
├── 📄 .gitignore                  # Git忽略文件配置
├── 📄 .gitattributes              # Git属性配置
└── 📄 .vscodeignore               # VS Code忽略文件配置
```

## 🔧 开发配置
```
.vscode/
├── 📄 settings.json               # VS Code设置
└── 📄 tasks.json                  # VS Code任务配置
```

## 🏦 交易账户配置
```
accounts/
├── BINANCE/                       # 币安交易所账户
│   ├── BN0001/
│   ├── BN0002/
│   ├── BN1602/
│   │   └── 📄 binance_api.json
│   ├── BN2055/
│   │   └── 📄 binance_api.json
│   └── BN8891/
│       └── 📄 binance_api.json
├── COINW/                         # COINW交易所账户
│   ├── CW0001/
│   ├── CW0002/
│   ├── CW1602/
│   │   └── 📄 coinw_api.json
│   └── CW8891/
├── DEEP/                          # DEEP交易所账户
│   ├── DC0001/
│   ├── DC0002/
│   ├── DC1602/
│   └── DC8891/
└── OKX/                           # OKX交易所账户
    ├── OK0001/
    ├── OK0002/
    ├── OK1602/
    ├── OK8891/
    └── OKX8891/
        └── 📄 okx_api.json
```

## 🚀 应用程序
```
apps/
├── api/                           # 后端API服务
│   ├── 📄 main.py                 # API主程序入口
│   ├── 📄 requirements.txt        # Python依赖包
│   └── venv/                      # Python虚拟环境
│       ├── 📄 pyvenv.cfg
│       ├── Include/
│       ├── Lib/
│       │   └── site-packages/     # 安装的Python包
│       └── Scripts/
│           └── 📄 python.exe      # Python解释器
└── ui/                            # 前端用户界面
    ├── 📄 package.json            # Node.js项目配置
    ├── 📄 tsconfig.json           # TypeScript配置
    ├── 📄 vite.config.ts          # Vite构建配置
    ├── 📄 index.html              # 主页面模板
    ├── public/                    # 静态资源
    ├── src/                       # 源代码
    │   ├── 📄 main.tsx            # 前端主入口
    │   ├── 📄 App.tsx             # 主应用组件
    │   ├── contexts/              # React上下文
    │   │   └── 📄 ApiContext.tsx  # API上下文
    │   ├── components/            # React组件
    │   ├── pages/                 # 页面组件
    │   └── utils/                 # 工具函数
    └── node_modules/              # Node.js依赖包
```

## ⚙️ 核心业务逻辑
```
core/
├── 📄 config_live.py             # 实时配置
├── 📄 config_loader.py           # 配置加载器
├── 📄 event_bus.py               # 事件总线
├── 📄 logger.py                  # 日志系统
├── 📄 state_store.py             # 状态存储
├── 📄 websocket_logger.py        # WebSocket日志
├── config/                       # 配置文件
│   └── 📄 defaults.json          # 默认配置
├── domain/                       # 领域模型
│   ├── 📄 enums.py               # 枚举定义
│   └── 📄 models.py              # 数据模型
├── execute/                      # 执行引擎
│   ├── 📄 strategy_engine.py     # 策略引擎
│   └── 📄 strategy_executor.py   # 策略执行器
├── managers/                     # 管理器
│   ├── 📄 account_manager.py     # 账户管理
│   ├── 📄 platform_manager.py   # 平台管理
│   ├── 📄 state_manager.py      # 状态管理
│   └── 📄 strategy_manager.py   # 策略管理
├── platform/                    # 交易平台
│   ├── 📄 base.py               # 基础平台类
│   ├── 📄 binance.py            # 币安平台
│   ├── 📄 coinw.py              # COINW平台
│   ├── 📄 okx.py                # OKX平台
│   └── 📄 capabilities.py       # 平台能力定义
├── services/                    # 业务服务
│   ├── 📄 calc.py               # 计算服务
│   ├── 📄 hedge_service.py      # 对冲服务
│   └── ...                      # 其他服务
├── strategy/                    # 交易策略
│   ├── 📄 base.py               # 基础策略类
│   └── martingale_hedge/        # 马丁格尔对冲策略
│       ├── 📄 strategy.py       # 策略实现
│       ├── 📄 executor.py       # 策略执行器
│       └── adapters/            # 平台适配器
└── utils/                       # 工具函数
    ├── 📄 decimal_ext.py        # 精度扩展
    ├── 📄 error_codes.py        # 错误码定义
    └── 📄 plugin_loader.py      # 插件加载器
```

## 📊 数据存储
```
logs/                             # 日志文件
├── 📄 error.log                 # 错误日志
├── 📄 runtime.log               # 运行时日志
└── 📄 trade.log                 # 交易日志

state/                           # 状态数据
├── BN1602/                      # 账户状态
├── BN2055/
├── MARTINGALE_HEDGE_1_*/        # 策略实例状态
├── MARTINGALE_HEDGE_2_*/
└── ...

profiles/                        # 配置文件
├── _shared_defaults/            # 共享默认配置
├── BINANCE/                     # 币安平台配置
├── COINW/                       # COINW平台配置
├── DEEP/                        # DEEP平台配置
└── OKX/                         # OKX平台配置
```

## 🧪 测试
```
tests/                           # 测试文件
└── ...                          # 各种测试用例
```

## 📋 项目特点

### 🏗️ 架构设计
- **微服务架构**: API后端 + React前端分离
- **模块化设计**: 核心业务逻辑高度模块化
- **插件化扩展**: 支持多交易平台插件

### 🔄 数据流
1. **前端界面** ↔ **API服务** ↔ **核心引擎**
2. **策略引擎** ↔ **交易平台** ↔ **市场数据**
3. **状态管理** ↔ **日志系统** ↔ **文件存储**

### 🚀 启动方式
- **完整版**: `start-trading.bat` (包含环境检查)
- **简化版**: `start-trading-2.bat` (快速启动)
- **开发版**: 分别启动API和UI服务

### 🔗 服务端口
- **前端界面**: http://localhost:3001
- **API服务**: http://localhost:8001
- **API文档**: http://localhost:8001/docs


| Path | Purpose |
|------|---------|
| `README.md` | 项目文档和安装说明 |
| `apps/ui/package.json` | 前端项目配置、依赖包和构建脚本 |
| `apps/ui/tsconfig.json` | 前端应用的TypeScript编译配置 |
| `apps/ui/vite.config.ts` | Vite构建工具的开发和生产环境配置 |
| `apps/ui/index.html` | React应用的主HTML模板文件 |
| `apps/ui/src/main.tsx` | 前端应用入口点和React挂载文件 |
| `apps/ui/src/App.tsx` | 根React组件，包含路由和布局结构 |
| `apps/ui/src/contexts/ApiContext.tsx` | API通信和状态管理的React上下文 |
| `apps/ui/src/components/**` | 可复用的React UI组件目录 |
| `apps/ui/src/hooks/**` | 自定义React钩子和共享逻辑 |
| `apps/ui/src/services/**` | API服务层和外部集成接口 |
| `apps/ui/src/utils/**` | 工具函数和辅助方法集合 |
| `apps/api/main.py` | 后端API服务器的FastAPI入口点 |
| `apps/api/requirements.txt` | 后端服务的Python依赖包列表 |
| `core/config_loader.py` | 配置管理和加载系统 |
| `core/logger.py` | 应用程序的集中日志系统 |
| `core/state_store.py` | 应用状态持久化和管理 |
| `core/strategy_engine.py` | 核心交易策略执行引擎 |
| `core/platform/base.py` | 交易平台集成的基础类 |
| `core/domain/models.py` | 数据模型和领域实体定义 |
| `accounts/**/api.json` | 交易平台API凭证和配置文件 |